<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golf Score Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a4d3a 0%, #0f2922 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 100vw;
            padding: 20px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .interface {
            display: none;
        }

        .interface.active {
            display: block;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-size: 18px;
            font-weight: 600;
            color: #e8f5e8;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            background: linear-gradient(135deg, #2d7a4f 0%, #1e5a3a 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            min-width: 80px;
        }

        .btn:hover {
            background: linear-gradient(135deg, #3a8f5f 0%, #2d6b4a 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .btn.active {
            background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.4);
        }

        .btn-primary {
            background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            padding: 15px 30px;
            font-size: 18px;
            margin-top: 20px;
            width: 100%;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            padding: 10px 20px;
            font-size: 14px;
            margin: 10px 5px;
        }

        .input-field {
            width: 100%;
            padding: 15px;
            border: 2px solid #4caf50;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .input-field::placeholder {
            color: #ccc;
        }

        .players-inputs {
            margin-top: 20px;
        }

        .score-summary {
            position: sticky;
            top: 0;
            background: rgba(26, 77, 58, 0.95);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            z-index: 100;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .summary-row:last-child {
            margin-bottom: 0;
        }

        .player-name {
            font-weight: 600;
            color: #e8f5e8;
        }

        .score-display {
            font-weight: 700;
            font-size: 16px;
            padding: 5px 10px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
        }

        .score-positive {
            color: #ff6b6b;
        }

        .score-negative {
            color: #4caf50;
        }

        .score-even {
            color: #ffd700;
        }

        .hole-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .hole-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .hole-number {
            font-size: 24px;
            font-weight: 700;
            color: #4caf50;
            margin-bottom: 10px;
        }

        .par-selection {
            margin-bottom: 20px;
        }

        .scores-grid {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }

        .player-score {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.05);
            padding: 10px 15px;
            border-radius: 10px;
        }

        .score-input {
            width: 60px;
            padding: 8px;
            border: 2px solid #4caf50;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-align: center;
            font-size: 16px;
            font-weight: 600;
        }

        .result-indicator {
            min-width: 30px;
            text-align: center;
            font-size: 18px;
        }

        .hole-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .final-results {
            background: rgba(26, 77, 58, 0.9);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 2px solid #4caf50;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .results-table th,
        .results-table td {
            padding: 8px 4px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .results-table th {
            background: rgba(76, 175, 80, 0.3);
            font-weight: 700;
            position: sticky;
            top: 0;
        }

        .results-table td {
            background: rgba(255, 255, 255, 0.05);
        }

        .total-row {
            background: rgba(76, 175, 80, 0.2) !important;
            font-weight: 700;
        }

        .winner-announcement {
            text-align: center;
            background: linear-gradient(135deg, #ffd700 0%, #ffb300 100%);
            color: #1a4d3a;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 18px;
            font-weight: 700;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .results-table {
                font-size: 12px;
            }
            
            .results-table th,
            .results-table td {
                padding: 6px 2px;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 14px;
                min-width: 70px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Interface 1 : Configuration -->
        <div id="interface1" class="interface active">
            <div class="header">
                <h1>üõ†Ô∏è Config de la partie</h1>
            </div>

            <div class="form-group">
                <label>Nombre de joueurs en plus de moi :</label>
                <div class="button-group">
                    <button class="btn" onclick="selectPlayers(0)">0</button>
                    <button class="btn" onclick="selectPlayers(1)">1</button>
                    <button class="btn" onclick="selectPlayers(2)">2</button>
                    <button class="btn" onclick="selectPlayers(3)">3</button>
                </div>
            </div>

            <div id="playersInputs" class="players-inputs hidden">
                <div class="form-group">
                    <label>Noms des joueurs :</label>
                    <input type="text" class="input-field" id="player1" placeholder="Arthur" value="Arthur" readonly>
                    <div id="additionalPlayers"></div>
                </div>
            </div>

            <div class="form-group">
                <label>Nombre de trous :</label>
                <div class="button-group">
                    <button class="btn" onclick="selectHoles(9)">9 trous</button>
                    <button class="btn" onclick="selectHoles(18)">18 trous</button>
                </div>
            </div>

            <button class="btn btn-primary" onclick="startGame()">Commencer la partie</button>
        </div>

        <!-- Interface 2 : Jeu -->
        <div id="interface2" class="interface">
            <div class="header">
                <h1>‚õ≥ Carte des scores</h1>
            </div>

            <div id="scoreSummary" class="score-summary"></div>

            <div id="gameArea"></div>

            <div class="hole-actions">
                <button class="btn btn-secondary" onclick="previousHole()">Retour</button>
                <button class="btn btn-primary" onclick="validateHole()">Valider le trou</button>
            </div>
        </div>

        <!-- Interface 3 : R√©sultats -->
        <div id="interface3" class="interface">
            <div class="header">
                <h1 id="finalTitle">üìÖ Partie du</h1>
            </div>

            <div id="finalResults" class="final-results"></div>

            <button class="btn btn-primary" onclick="newGame()">Nouvelle partie</button>
        </div>
    </div>

    <script>
        // Variables globales
        let gameState = {
            players: [],
            totalHoles: 9,
            currentHole: 1,
            scores: {},
            pars: {},
            completedHoles: []
        };

        // S√©lection du nombre de joueurs
        function selectPlayers(count) {
            // R√©initialiser les boutons
            document.querySelectorAll('#interface1 .btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            const playersInputs = document.getElementById('playersInputs');
            const additionalPlayers = document.getElementById('additionalPlayers');
            
            additionalPlayers.innerHTML = '';
            
            if (count === 0) {
                playersInputs.classList.add('hidden');
                gameState.players = ['Arthur'];
            } else {
                playersInputs.classList.remove('hidden');
                gameState.players = ['Arthur'];
                
                for (let i = 2; i <= count + 1; i++) {
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.className = 'input-field';
                    input.id = `player${i}`;
                    input.placeholder = `Nom du joueur ${i}`;
                    additionalPlayers.appendChild(input);
                }
            }
        }

        // S√©lection du nombre de trous
        function selectHoles(holes) {
            document.querySelectorAll('.btn').forEach(btn => {
                if (btn.textContent.includes('trous')) {
                    btn.classList.remove('active');
                }
            });
            event.target.classList.add('active');
            gameState.totalHoles = holes;
        }

        // D√©marrer le jeu
        function startGame() {
            // V√©rifier que tous les champs sont remplis
            if (gameState.players.length === 1) {
                // Solo
            } else {
                // R√©cup√©rer les noms des autres joueurs
                const playerInputs = document.querySelectorAll('#additionalPlayers input');
                playerInputs.forEach((input, index) => {
                    if (input.value.trim()) {
                        if (gameState.players.length <= index + 1) {
                            gameState.players.push(input.value.trim());
                        } else {
                            gameState.players[index + 1] = input.value.trim();
                        }
                    }
                });
            }

            if (!gameState.totalHoles) {
                alert('Veuillez s√©lectionner le nombre de trous');
                return;
            }

            // Initialiser les scores
            gameState.players.forEach(player => {
                gameState.scores[player] = {};
            });

            // Passer √† l'interface de jeu
            switchInterface('interface2');
            displayCurrentHole();
            updateScoreSummary();
        }

        // Changer d'interface
        function switchInterface(interfaceId) {
            document.querySelectorAll('.interface').forEach(i => i.classList.remove('active'));
            document.getElementById(interfaceId).classList.add('active');
        }

        // Afficher le trou actuel
        function displayCurrentHole() {
            const gameArea = document.getElementById('gameArea');
            
            gameArea.innerHTML = `
                <div class="hole-card">
                    <div class="hole-header">
                        <div class="hole-number">Trou ${gameState.currentHole}</div>
                    </div>
                    
                    <div class="par-selection">
                        <label>Par du trou :</label>
                        <div class="button-group">
                            <button class="btn" onclick="selectPar(3)">Par 3</button>
                            <button class="btn" onclick="selectPar(4)">Par 4</button>
                            <button class="btn" onclick="selectPar(5)">Par 5</button>
                        </div>
                    </div>
                    
                    <div class="scores-grid">
                        ${gameState.players.map(player => `
                            <div class="player-score">
                                <span class="player-name">${player}</span>
                                <input type="number" class="score-input" id="score-${player}" min="1" max="15" 
                                       onchange="updateResult('${player}')" placeholder="?">
                                <span class="result-indicator" id="result-${player}"></span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            // Restaurer les valeurs si le trou √©tait d√©j√† jou√©
            if (gameState.pars[gameState.currentHole]) {
                const parBtns = document.querySelectorAll('.par-selection .btn');
                parBtns.forEach(btn => {
                    if (btn.textContent.includes(gameState.pars[gameState.currentHole])) {
                        btn.classList.add('active');
                    }
                });

                gameState.players.forEach(player => {
                    const scoreInput = document.getElementById(`score-${player}`);
                    if (gameState.scores[player][gameState.currentHole]) {
                        scoreInput.value = gameState.scores[player][gameState.currentHole];
                        updateResult(player);
                    }
                });
            }
        }

        // S√©lectionner le par
        function selectPar(par) {
            document.querySelectorAll('.par-selection .btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            gameState.pars[gameState.currentHole] = par;
            
            // Mettre √† jour tous les r√©sultats
            gameState.players.forEach(player => updateResult(player));
        }

        // Mettre √† jour le r√©sultat d'un joueur
        function updateResult(player) {
            const scoreInput = document.getElementById(`score-${player}`);
            const resultSpan = document.getElementById(`result-${player}`);
            
            if (!scoreInput.value || !gameState.pars[gameState.currentHole]) {
                resultSpan.textContent = '';
                return;
            }

            const score = parseInt(scoreInput.value);
            const par = gameState.pars[gameState.currentHole];
            const diff = score - par;

            let result = '';
            if (diff <= -2) result = 'ü¶Ö'; // Eagle ou mieux
            else if (diff === -1) result = 'üü¢'; // Birdie
            else if (diff === 0) result = '‚ö™'; // Par
            else if (diff === 1) result = 'üî¥'; // Bogey
            else if (diff === 2) result = 'üî¥üî¥'; // Double bogey
            else result = 'üíÄ'; // Pire

            resultSpan.textContent = result;
        }

        // Valider le trou
        function validateHole() {
            // V√©rifier que le par est s√©lectionn√©
            if (!gameState.pars[gameState.currentHole]) {
                alert('Veuillez s√©lectionner le par du trou');
                return;
            }

            // V√©rifier que tous les scores sont saisis
            let allScoresEntered = true;
            gameState.players.forEach(player => {
                const scoreInput = document.getElementById(`score-${player}`);
                if (!scoreInput.value) {
                    allScoresEntered = false;
                } else {
                    gameState.scores[player][gameState.currentHole] = parseInt(scoreInput.value);
                }
            });

            if (!allScoresEntered) {
                alert('Veuillez saisir tous les scores');
                return;
            }

            // Marquer le trou comme compl√©t√©
            if (!gameState.completedHoles.includes(gameState.currentHole)) {
                gameState.completedHoles.push(gameState.currentHole);
            }

            // Passer au trou suivant ou terminer
            if (gameState.currentHole < gameState.totalHoles) {
                gameState.currentHole++;
                displayCurrentHole();
            } else {
                // Partie termin√©e
                showFinalResults();
            }

            updateScoreSummary();
        }

        // Trou pr√©c√©dent
        function previousHole() {
            if (gameState.currentHole > 1) {
                gameState.currentHole--;
                displayCurrentHole();
                updateScoreSummary();
            }
        }

        // Mettre √† jour le r√©sum√© des scores
        function updateScoreSummary() {
            const summary = document.getElementById('scoreSummary');
            
            summary.innerHTML = gameState.players.map(player => {
                let totalScore = 0;
                let totalPar = 0;
                
                gameState.completedHoles.forEach(hole => {
                    if (gameState.scores[player][hole] && gameState.pars[hole]) {
                        totalScore += gameState.scores[player][hole];
                        totalPar += gameState.pars[hole];
                    }
                });

                const diff = totalScore - totalPar;
                let displayScore = '';
                let scoreClass = '';

                if (diff > 0) {
                    displayScore = `+${diff}`;
                    scoreClass = 'score-positive';
                } else if (diff < 0) {
                    displayScore = `${diff}`;
                    scoreClass = 'score-negative';
                } else {
                    displayScore = 'E';
                    scoreClass = 'score-even';
                }

                return `
                    <div class="summary-row">
                        <span class="player-name">${player}</span>
                        <span class="score-display ${scoreClass}">${displayScore}</span>
                    </div>
                `;
            }).join('');
        }

        // Afficher les r√©sultats finaux
        function showFinalResults() {
            const today = new Date();
            const dateStr = today.toLocaleDateString('fr-FR');
            document.getElementById('finalTitle').textContent = `üìÖ Partie du ${dateStr}`;

            // Cr√©er le tableau des r√©sultats
            let tableHTML = `
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Trou</th>
                            ${gameState.players.map(player => `<th>${player}</th>`).join('')}
                        </tr>
                    </thead>
                    <tbody>
            `;

            // Lignes pour chaque trou
            for (let hole = 1; hole <= gameState.totalHoles; hole++) {
                tableHTML += `<tr>
                    <td><strong>${hole}</strong><br><small>Par ${gameState.pars[hole] || '?'}</small></td>
                    ${gameState.players.map(player => {
                        const score = gameState.scores[player][hole] || '?';
                        return `<td>${score}</td>`;
                    }).join('')}
                </tr>`;
            }

            // Ligne des totaux
            const totals = gameState.players.map(player => {
                let total = 0;
                for (let hole = 1; hole <= gameState.totalHoles; hole++) {
                    total += gameState.scores[player][hole] || 0;
                }
                return total;
            });

            const totalPar = Object.values(gameState.pars).reduce((sum, par) => sum + par, 0);

            tableHTML += `
                <tr class="total-row">
                    <td><strong>Total</strong><br><small>Par ${totalPar}</small></td>
                    ${totals.map(total => {
                        const diff = total - totalPar;
                        const diffStr = diff > 0 ? `+${diff}` : diff < 0 ? `${diff}` : 'E';
                        return `<td><strong>${total}</strong><br><small>${diffStr}</small></td>`;
                    }).join('')}
                </tr>
            `;

            tableHTML += '</tbody></table>';

            // D√©terminer le gagnant
            const minScore = Math.min(...totals);
            const winners = gameState.players.filter((player, index) => totals[index] === minScore);
            
            let winnerText = '';
            if (winners.length === 1) {
                winnerText = `üèÜ Gagnant : ${winners[0]}`;
            } else {
                winnerText = `ü§ù √âgalit√© : ${winners.join(', ')}`;
            }

            document.getElementById('finalResults').innerHTML = tableHTML + 
                `<div class="winner-announcement">${winnerText}</div>`;

            switchInterface('interface3');
        }

        // Nouvelle partie
        function newGame() {
            gameState = {
                players: [],
                totalHoles: 9,
                currentHole: 1,
                scores: {},
                pars: {},
                completedHoles: []
            };

            // R√©initialiser l'interface
            document.querySelectorAll('.btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('playersInputs').classList.add('hidden');
            document.getElementById('additionalPlayers').innerHTML = '';

            switchInterface('interface1');
        }

        // Initialisation
        gameState.players = ['Arthur'];
    </script>
</body>
</html>
